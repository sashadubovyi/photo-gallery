"use strict";(self.webpackChunkphoto_gallery=self.webpackChunkphoto_gallery||[]).push([[117],{117:function(e,n,t){t.r(n),t.d(n,{AdminPanel:function(){return j}});var a=t(3433),r=t(5861),l=t(5671),o=t(3144),s=t(136),i=t(3668),c=t(7757),u=t.n(c),d=t(2791),p=t(7871),m=t(276),h=t(4702),g=t(8742),f=t(3524),_=t(184),v=(0,h.ZF)({apiKey:"AIzaSyBV36jpX-P4riejmVYQlexhyen4DEijUyU",authDomain:"photo-gallery-478c0.firebaseapp.com",projectId:"photo-gallery-478c0",storageBucket:"photo-gallery-478c0.appspot.com",messagingSenderId:"948924880062",appId:"1:948924880062:web:1458bd90eacf61bedefaef"}),x=(0,m.cF)(v),P=["solo","wedings","family","kids","bussines","pregnant"],j=function(e){(0,s.Z)(t,e);var n=(0,i.Z)(t);function t(e){var a;return(0,l.Z)(this,t),(a=n.call(this,e)).handleLogout=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.I.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0432\u0438\u0445\u043e\u0434\u0443:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.state={selectedFiles:[],uploadProgress:0,uploadedImageUrls:[],selectedFolder:P[0]},a}return(0,o.Z)(t,[{key:"getFiles",value:function(e){var n=this,t=e.target.files;if(this.setState({selectedFiles:t}),t.length>0){var a=new FileReader;a.onload=function(e){var a=Array.from(t).map((function(e){return URL.createObjectURL(e)}));n.setState({uploadedImageUrls:a})},a.readAsDataURL(t[0])}}},{key:"handleFolderChange",value:function(e){this.setState({selectedFolder:e.target.value})}},{key:"uploadImages",value:function(){var e=(0,r.Z)(u().mark((function e(){var n,t,a,r,l,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,t=n.selectedFiles,a=n.selectedFolder,0!==t.length){e.next=4;break}return console.error("\u0424\u0430\u0439\u043b\u0438 \u043d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u0456!"),e.abrupt("return");case 4:return r=Array.from(t).map((function(e){var n=(0,m.iH)(x,"images/".concat(a,"/").concat(e.name)),t=(0,m.B0)(n,e);return new Promise((function(e,n){t.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);o.setState({uploadProgress:n})}),(function(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0430\u0439\u043b\u0443:",e),n(e)}),(function(){(0,m.Jt)(t.snapshot.ref).then((function(n){console.log("\u0424\u0430\u0439\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0437\u0430 \u0430\u0434\u0440\u0435\u0441\u043e\u044e",n),e(n)})).catch((function(e){return n(e)}))}))}))})),e.prev=5,e.next=8,Promise.all(r);case 8:l=e.sent,this.setState({uploadedImageUrls:l,uploadProgress:0,selectedFiles:[]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0430\u0439\u043b\u0456\u0432:",e.t0);case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.state,t=n.uploadProgress,r=n.uploadedImageUrls,l=n.selectedFolder;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{className:p.Z.logoutButton,onClick:this.handleLogout,children:(0,_.jsx)(f.mRO,{})}),(0,_.jsxs)("div",{className:p.Z.uploadContainer,children:[(0,_.jsx)("div",{className:p.Z.folderSelect}),(0,_.jsx)("input",{type:"file",className:p.Z.inputFile,id:"fileInp",onChange:function(n){return e.getFiles(n)},accept:"image/png, image/jpeg, image/jpg",ref:this.fileInputRef,multiple:!0}),(0,_.jsx)("label",{htmlFor:"fileInp",children:0===r.length?(0,_.jsx)("p",{children:"+"}):r.map((function(n,t){return(0,_.jsxs)("div",{className:p.Z.imageContainer,children:[(0,_.jsx)("img",{className:p.Z.imageSmall,src:n,alt:"\u041e\u0431\u0440\u0430\u043d\u0435 \u0444\u043e\u0442\u043e ".concat(t+1)}),(0,_.jsx)("button",{className:p.Z.deleteButton,onClick:function(){var n=(0,a.Z)(r);n.splice(t,1),e.setState({uploadedImageUrls:n})},children:"x"})]},t)}))}),(0,_.jsx)("span",{className:p.Z.fileText}),(0,_.jsx)("select",{value:l,onChange:function(n){return e.handleFolderChange(n)},children:P.map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))}),(0,_.jsx)("button",{className:p.Z.uploadPhotoBtn,onClick:function(){return e.uploadImages()},children:"\u0417\u0410\u0412\u0410\u041d\u0422\u0410\u0416\u0418\u0422\u0418 \u0424\u041e\u0422\u041e"}),(0,_.jsx)("div",{className:p.Z.bar,children:(0,_.jsx)("div",{className:p.Z.progress,style:{width:"".concat(t,"%")}})}),(0,_.jsxs)("div",{className:p.Z.uploadPercentage,children:[t,"%"]})]})]})}}]),t}(d.Component);n.default=j},7871:function(e,n){n.Z={uploadContainer:"AdminPanel_uploadContainer__ZuZh9",inputFile:"AdminPanel_inputFile__RkNmq",uploadPhotoBtn:"AdminPanel_uploadPhotoBtn__yoLY3",imageContainer:"AdminPanel_imageContainer__r5CBl",deleteButton:"AdminPanel_deleteButton__fQCqY",chooseFolder:"AdminPanel_chooseFolder__gE4yU",bar:"AdminPanel_bar__Dwzrz",progress:"AdminPanel_progress__PSJ3e",uploadPercentage:"AdminPanel_uploadPercentage__tyr5H",imageSmall:"AdminPanel_imageSmall__1MYou",eContainer:"AdminPanel_eContainer__XfzNE",eForm:"AdminPanel_eForm__jMVAX",logoutButton:"AdminPanel_logoutButton__dCJH1"}}}]);
//# sourceMappingURL=117.43b5a50f.chunk.js.map