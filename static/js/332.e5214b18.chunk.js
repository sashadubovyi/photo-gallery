"use strict";(self.webpackChunkphoto_gallery=self.webpackChunkphoto_gallery||[]).push([[332],{2332:function(e,t,n){n.r(t),n.d(t,{AdminPanel:function(){return P},default:function(){return y}});var a=n(3433),r=n(5861),l=n(5671),s=n(3144),o=n(136),i=n(3668),c=n(7757),u=n.n(c),d=n(2791),p={uploadContainer:"AdminPanel_uploadContainer__ZuZh9",inputFile:"AdminPanel_inputFile__RkNmq",uploadPhotoBtn:"AdminPanel_uploadPhotoBtn__yoLY3",imageContainer:"AdminPanel_imageContainer__r5CBl",deleteButton:"AdminPanel_deleteButton__fQCqY",chooseFolder:"AdminPanel_chooseFolder__gE4yU",bar:"AdminPanel_bar__Dwzrz",progress:"AdminPanel_progress__PSJ3e",uploadPercentage:"AdminPanel_uploadPercentage__tyr5H",imageSmall:"AdminPanel_imageSmall__1MYou"},m=n(276),h=n(4702),g=n(184),f=(0,h.ZF)({apiKey:"AIzaSyBV36jpX-P4riejmVYQlexhyen4DEijUyU",authDomain:"photo-gallery-478c0.firebaseapp.com",projectId:"photo-gallery-478c0",storageBucket:"photo-gallery-478c0.appspot.com",messagingSenderId:"948924880062",appId:"1:948924880062:web:1458bd90eacf61bedefaef"}),_=(0,m.cF)(f),v=["solo","wedings","family","kids"],P=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,l.Z)(this,n),(a=t.call(this,e)).state={selectedFiles:[],uploadProgress:0,uploadedImageUrls:[],selectedFolder:v[0]},a}return(0,s.Z)(n,[{key:"getFiles",value:function(e){var t=this,n=e.target.files;if(this.setState({selectedFiles:n}),n.length>0){var a=new FileReader;a.onload=function(e){var a=Array.from(n).map((function(e){return URL.createObjectURL(e)}));t.setState({uploadedImageUrls:a})},a.readAsDataURL(n[0])}}},{key:"handleFolderChange",value:function(e){this.setState({selectedFolder:e.target.value})}},{key:"uploadImages",value:function(){var e=(0,r.Z)(u().mark((function e(){var t,n,a,r,l,s=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.selectedFiles,a=t.selectedFolder,0!==n.length){e.next=4;break}return console.error("\u0424\u0430\u0439\u043b\u0438 \u043d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u0456!"),e.abrupt("return");case 4:return r=Array.from(n).map((function(e){var t=(0,m.iH)(_,"images/".concat(a,"/").concat(e.name)),n=(0,m.B0)(t,e);return new Promise((function(e,t){n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);s.setState({uploadProgress:t})}),(function(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0430\u0439\u043b\u0443:",e),t(e)}),(function(){(0,m.Jt)(n.snapshot.ref).then((function(t){console.log("\u0424\u0430\u0439\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0437\u0430 \u0430\u0434\u0440\u0435\u0441\u043e\u044e",t),e(t)})).catch((function(e){return t(e)}))}))}))})),e.prev=5,e.next=8,Promise.all(r);case 8:l=e.sent,this.setState({uploadedImageUrls:l,uploadProgress:0,selectedFiles:[]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0444\u0430\u0439\u043b\u0456\u0432:",e.t0);case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.uploadProgress,r=t.uploadedImageUrls,l=t.selectedFolder;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:p.uploadContainer,children:[(0,g.jsx)("div",{className:p.folderSelect}),(0,g.jsx)("input",{type:"file",className:p.inputFile,id:"fileInp",onChange:function(t){return e.getFiles(t)},accept:"image/png, image/jpeg, image/jpg",ref:this.fileInputRef,multiple:!0}),(0,g.jsx)("label",{htmlFor:"fileInp",children:0===r.length?(0,g.jsx)("p",{children:"+"}):r.map((function(t,n){return(0,g.jsxs)("div",{className:p.imageContainer,children:[(0,g.jsx)("img",{className:p.imageSmall,src:t,alt:"\u041e\u0431\u0440\u0430\u043d\u0435 \u0444\u043e\u0442\u043e ".concat(n+1)}),(0,g.jsx)("button",{className:p.deleteButton,onClick:function(){var t=(0,a.Z)(r);t.splice(n,1),e.setState({uploadedImageUrls:t})},children:"x"})]},n)}))}),(0,g.jsx)("span",{className:p.fileText}),(0,g.jsx)("select",{value:l,onChange:function(t){return e.handleFolderChange(t)},children:v.map((function(e){return(0,g.jsx)("option",{value:e,children:e},e)}))}),(0,g.jsx)("button",{className:p.uploadPhotoBtn,onClick:function(){return e.uploadImages()},children:"\u0417\u0410\u0412\u0410\u041d\u0422\u0410\u0416\u0418\u0422\u0418 \u0424\u041e\u0422\u041e"}),(0,g.jsx)("div",{className:p.bar,children:(0,g.jsx)("div",{className:p.progress,style:{width:"".concat(n,"%")}})}),(0,g.jsxs)("div",{className:p.uploadPercentage,children:[n,"%"]})]})})}}]),n}(d.Component),y=P}}]);
//# sourceMappingURL=332.e5214b18.chunk.js.map